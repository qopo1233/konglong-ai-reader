<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>原文查看</title>
  <style>
    body { margin: 0; }
    .custom-title-bar {
      height: 36px;
      background: #f7f7f7;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding: 0 16px;
      -webkit-app-region: drag;
      user-select: none;
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 1000;
      border-bottom: 1px solid #eee;
    }
    #menu-btn, #menu { -webkit-app-region: no-drag; }
    #menu-btn { font-size: 20px; background: none; border: none; cursor: pointer; padding: 4px 8px; }
    #menu { display:none;position:absolute;right:16px;top:36px;background:#fff;border:1px solid #ccc;box-shadow:0 2px 8px #0002;min-width:120px; }
    #menu div { padding:10px 16px; cursor:pointer; }
    #menu div:hover { background:#f5f5f5; }
    .content {
      margin-top: 36px;
      height: calc(100vh - 36px);
    }
    webview {
      width: 100vw;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>
  <div class="custom-title-bar">
    <button id="menu-btn">⋯</button>
    <div id="menu">
      <div id="copy-link">复制原文链接</div>
    </div>
  </div>
  <div class="content">
    <webview id="article-webview"></webview>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const link = params.get('link');
    document.getElementById('article-webview').src = link;
    // 菜单逻辑
    const menuBtn = document.getElementById('menu-btn');
    const menu = document.getElementById('menu');
    menuBtn.onclick = (e) => {
      e.stopPropagation();
      if (menu.style.display === 'none' || menu.style.display === '') {
        menu.style.display = 'block';
      } else {
        menu.style.display = 'none';
      }
    };
    document.getElementById('copy-link').onclick = () => {
      window.electronAPI.invoke('copy-article-link');
      menu.style.display = 'none';
    };
    window.onclick = e => {
      if (!menu.contains(e.target) && e.target !== menuBtn) menu.style.display = 'none';
    };
    window.electronAPI.on('copy-success', () => {
      alert('已复制原文链接');
    });
  </script>
</body>
</html> 